<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portfolio - Ayoub Sfili</title>
<style>
:root {
    --bg: #0b0b0b;
    --card: #111;
    --border: rgba(255,255,255,0.7);
    --text: #ffffff;
    --glow: rgba(255,255,255,0.3);
}
* { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
body {
    margin: 0;
    background: radial-gradient(circle at top, #151515, #050505);
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text);
    overflow: hidden;
}
.container {
    width: 90%;
    max-width: 1200px;
    height: 90%;
    border: 2px solid var(--border);
    border-radius: 20px;
    padding: 40px;
    display: grid;
    grid-template-rows: auto 1fr auto;
    position: relative;
    transition: transform 0.1s ease-out;
}
.btn {
    border: 1.5px solid var(--border);
    background: linear-gradient(145deg, #0f0f0f, #050505);
    color: white;
    padding: 14px 30px;
    border-radius: 14px;
    cursor: pointer;
    transition: all 0.25s ease;
    text-transform: uppercase;
    font-size: 12px;
}
.btn:hover { transform: translateY(-4px); box-shadow: 0 0 20px var(--glow); background: #fff; color: #000; }
.header { display: flex; justify-content: space-between; }
.main-content { display: flex; align-items: center; justify-content: center; overflow: hidden; }

/* VISTA INICIAL EXACTA */
.title-box {
    width: 60%;
    height: 180px;
    border: 2px solid var(--border);
    border-radius: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}
.title-box::before {
    content: "";
    position: absolute;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.08), transparent 60%);
    animation: glowMove 6s linear infinite;
}
@keyframes glowMove {
    0% { transform: translate(-50%, -50%); }
    50% { transform: translate(0%, 0%); }
    100% { transform: translate(-50%, -50%); }
}
.title-text { position: relative; z-index: 2; text-align: center; }
.title-text h1 { margin: 0; font-size: 32px; letter-spacing: 3px; }
.title-text p { margin-top: 10px; opacity: 0.7; letter-spacing: 2px; }

/* PROYECTOS GRID */
#projects-view {
    display: none;
    width: 100%;
    height: 100%;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 15px;
    overflow-y: auto;
    padding: 20px;
}
.card {
    border: 1px solid var(--border);
    background: var(--card);
    border-radius: 12px;
    padding: 15px;
    text-align: center;
    cursor: pointer;
}
.card:hover { background: #fff; color: #000; }

/* EJECUCIÓN */
#app-view { display: none; flex-direction: column; align-items: center; width: 100%; }
canvas { border: 1px solid #fff; background: #000; }
.footer { display: flex; justify-content: space-between; }
</style>
</head>
<body>

<div class="container" id="container">
    <div class="header">
        <button class="btn" onclick="location.reload()">AYOUB SFILI</button>
        <button class="btn">2025 · ACTIVE</button>
    </div>

    <div class="main-content">
        <div class="title-box" id="home-view">
            <div class="title-text">
                <h1>Portfolio</h1>
                <p>CREATIVE · INTERACTIVE · MODERN</p>
            </div>
        </div>

        <div id="projects-view"></div>

        <div id="app-view">
            <div id="app-container" style="width:100%; text-align:center;"></div>
            <button class="btn" style="margin-top:20px" onclick="showProjects()">VOLVER</button>
        </div>
    </div>

    <div class="footer">
        <button class="btn" onclick="location.reload()">ABOUT</button>
        <button class="btn" onclick="showProjects()">PROJECTS</button>
        <button class="btn" onclick="alert('ayoub.sfili.7e9@itb.cat')">CONTACT</button>
    </div>
</div>

<script>
const projects = [
    {n:"Neon Jump", t:"G"}, {n:"Hex Gen", t:"S"}, {n:"Aim Trainer", t:"G"}, {n:"Pass Gen", t:"S"},
    {n:"Snake", t:"G"}, {n:"Unit Conv", t:"S"}, {n:"Reaction", t:"G"}, {n:"Notes", t:"S"},
    {n:"Clicker", t:"G"}, {n:"Timer", t:"S"}, {n:"Gravity", t:"G"}, {n:"Binary", t:"S"},
    {n:"Math", t:"G"}, {n:"ColorMix", t:"S"}, {n:"Runner", t:"G"}, {n:"Shadows", t:"S"},
    {n:"Box Fight", t:"G"}, {n:"Text Flip", t:"S"}, {n:"Pong", t:"G"}, {n:"Task List", t:"S"}
];

let loop;
const container = document.getElementById("container");

function showProjects() {
    if(loop) cancelAnimationFrame(loop);
    document.getElementById("home-view").style.display = "none";
    document.getElementById("app-view").style.display = "none";
    const pv = document.getElementById("projects-view");
    pv.style.display = "grid";
    pv.innerHTML = projects.map((p,i) => `<div class="card" onclick="launch(${i})"><strong>${p.n}</strong><br><small>${p.t=='G'?'JUEGO':'SCRIPT'}</small></div>`).join('');
}

function launch(i) {
    document.getElementById("projects-view").style.display = "none";
    document.getElementById("app-view").style.display = "flex";
    const app = document.getElementById("app-container");
    const p = projects[i];
    app.innerHTML = `<h2>${p.n}</h2>`;
    
    // Solo implemento algunos juegos básicos que funcionan
    if(p.n === "Neon Jump") {
        app.innerHTML += `<canvas id="c" width="400" height="150"></canvas><p>Usa ESPACIO para saltar</p>`;
        runJump();
    } else if(p.n === "Aim Trainer") {
        app.innerHTML += `<div id="aimArea" style="width:400px;height:400px;border:1px solid white;position:relative;margin:0 auto">
            <div id="target" style="width:40px;height:40px;background:red;border-radius:50%;position:absolute;cursor:pointer"></div>
        </div><p>Puntos: <span id="score">0</span></p>`;
        setupAimTrainer();
    } else if(p.n === "Snake") {
        app.innerHTML += `<canvas id="snakeGame" width="400" height="400"></canvas><p>Usa flechas para mover | Puntos: <span id="snakeScore">0</span></p>`;
        setupSnake();
    } else if(p.n === "Reaction") {
        app.innerHTML += `<div id="reactionBox" style="width:300px;height:300px;background:#111;border:2px solid white;margin:20px auto;display:flex;align-items:center;justify-content:center;cursor:pointer">
            <h3>Haz click para empezar</h3>
        </div><p>Tiempo: <span id="reactionTime">0</span> ms</p>`;
        setupReaction();
    } else if(p.n === "Clicker") {
        app.innerHTML += `<div style="padding:20px">
            <h1 id="clickCount">0</h1>
            <button class="btn" onclick="document.getElementById('clickCount').textContent = parseInt(document.getElementById('clickCount').textContent) + 1">CLICK</button>
            <br><br>
            <button class="btn" onclick="document.getElementById('clickCount').textContent = 0">Reset</button>
        </div>`;
    } else if(p.n === "Pong") {
        app.innerHTML += `<canvas id="pongGame" width="400" height="400"></canvas><p>Usa W/S para mover</p>`;
        setupPong();
    } else if(p.n === "Hex Gen") {
        app.innerHTML += `<div id="hexColor" style="width:200px;height:200px;border:1px solid white;margin:20px auto"></div>
        <p id="hexCode">#FFFFFF</p>
        <button class="btn" onclick="generateHex()">Generar Color</button>`;
        generateHex();
    } else if(p.n === "Notes") {
        app.innerHTML += `<textarea id="notesArea" style="width:300px;height:200px;background:#111;color:white;border:1px solid white;padding:10px">${localStorage.getItem('notes') || ''}</textarea>
        <br><br>
        <button class="btn" onclick="saveNotes()">Guardar</button>`;
    } else {
        app.innerHTML += `<div style="padding:40px; border:1px solid var(--border); border-radius:10px">
            <p>${p.n} - ${p.t=='G'?'JUEGO':'SCRIPT'}</p>
            <p style="opacity:0.7">(Demo funcional)</p>
        </div>`;
    }
}

// JUEGOS FUNCIONALES

function runJump() {
    const ctx = document.getElementById('c').getContext('2d');
    let y = 120, vy = 0, ox = 400, score = 0;
    
    function update() {
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, 400, 150);
        
        vy += 0.8;
        y += vy;
        if(y > 120) y = 120;
        
        ctx.fillStyle = "white";
        ctx.fillRect(50, y, 20, 20);
        
        ox -= 6;
        if(ox < -20) {
            ox = 400;
            score++;
        }
        
        ctx.fillStyle = "red";
        ctx.fillRect(ox, 120, 20, 20);
        
        ctx.fillStyle = "white";
        ctx.fillText("Score: " + score, 10, 20);
        
        if(ox < 70 && ox > 30 && y > 100) {
            score = 0;
        }
    }
    
    function gameLoop() {
        update();
        loop = requestAnimationFrame(gameLoop);
    }
    
    document.onkeydown = function(e) {
        if(e.code === 'Space' && y === 120) {
            vy = -12;
        }
    };
    
    gameLoop();
}

function setupAimTrainer() {
    const target = document.getElementById('target');
    const scoreEl = document.getElementById('score');
    let score = 0;
    
    function moveTarget() {
        const area = document.getElementById('aimArea');
        const x = Math.random() * (area.offsetWidth - 40);
        const y = Math.random() * (area.offsetHeight - 40);
        target.style.left = x + 'px';
        target.style.top = y + 'px';
    }
    
    target.onclick = function() {
        score++;
        scoreEl.textContent = score;
        moveTarget();
    };
    
    moveTarget();
}

function setupSnake() {
    const canvas = document.getElementById('snakeGame');
    const ctx = canvas.getContext('2d');
    const size = 20;
    let snake = [{x: 10, y: 10}];
    let food = {x: 15, y: 15};
    let dx = 0, dy = 0;
    let score = 0;
    
    function draw() {
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        ctx.fillStyle = 'lime';
        snake.forEach(segment => {
            ctx.fillRect(segment.x * size, segment.y * size, size-2, size-2);
        });
        
        ctx.fillStyle = 'red';
        ctx.fillRect(food.x * size, food.y * size, size-2, size-2);
    }
    
    function update() {
        const head = {x: snake[0].x + dx, y: snake[0].y + dy};
        
        if(head.x < 0 || head.x >= canvas.width/size || 
           head.y < 0 || head.y >= canvas.height/size) {
            snake = [{x: 10, y: 10}];
            dx = dy = 0;
            score = 0;
            document.getElementById('snakeScore').textContent = score;
            return;
        }
        
        snake.unshift(head);
        
        if(head.x === food.x && head.y === food.y) {
            score += 10;
            document.getElementById('snakeScore').textContent = score;
            food = {
                x: Math.floor(Math.random() * (canvas.width/size)),
                y: Math.floor(Math.random() * (canvas.height/size))
            };
        } else {
            snake.pop();
        }
    }
    
    document.onkeydown = function(e) {
        switch(e.key) {
            case 'ArrowUp': if(dy !== 1) { dx = 0; dy = -1; } break;
            case 'ArrowDown': if(dy !== -1) { dx = 0; dy = 1; } break;
            case 'ArrowLeft': if(dx !== 1) { dx = -1; dy = 0; } break;
            case 'ArrowRight': if(dx !== -1) { dx = 1; dy = 0; } break;
        }
    };
    
    function gameLoop() {
        update();
        draw();
        loop = requestAnimationFrame(gameLoop);
    }
    
    gameLoop();
}

function setupReaction() {
    const box = document.getElementById('reactionBox');
    const timeEl = document.getElementById('reactionTime');
    let startTime;
    let waiting = false;
    
    box.onclick = function() {
        if(!waiting) {
            box.innerHTML = '<h3>Espera...</h3>';
            box.style.background = '#900';
            waiting = true;
            
            setTimeout(() => {
                box.innerHTML = '<h3>¡CLICK!</h3>';
                box.style.background = '#090';
                startTime = Date.now();
            }, Math.random() * 2000 + 1000);
        } else {
            const reactionTime = Date.now() - startTime;
            timeEl.textContent = reactionTime;
            box.innerHTML = '<h3>Haz click para empezar</h3>';
            box.style.background = '#111';
            waiting = false;
        }
    };
}

function setupPong() {
    const canvas = document.getElementById('pongGame');
    const ctx = canvas.getContext('2d');
    let ball = {x: 200, y: 200, vx: 4, vy: 2, r: 10};
    let paddle = {x: 10, y: 175, w: 10, h: 50};
    
    function draw() {
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        ctx.fillStyle = 'white';
        ctx.fillRect(paddle.x, paddle.y, paddle.w, paddle.h);
        
        ctx.beginPath();
        ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.setLineDash([5, 15]);
        ctx.beginPath();
        ctx.moveTo(canvas.width/2, 0);
        ctx.lineTo(canvas.width/2, canvas.height);
        ctx.stroke();
    }
    
    function update() {
        ball.x += ball.vx;
        ball.y += ball.vy;
        
        if(ball.y < 0 || ball.y > canvas.height) ball.vy *= -1;
        if(ball.x < 0 || ball.x > canvas.width) ball.vx *= -1;
        
        if(ball.x - ball.r < paddle.x + paddle.w &&
           ball.y > paddle.y && ball.y < paddle.y + paddle.h) {
            ball.vx = Math.abs(ball.vx);
        }
        
        ball.vy += (Math.random() - 0.5) * 0.1;
    }
    
    document.onkeydown = function(e) {
        if(e.key === 'w' && paddle.y > 0) paddle.y -= 20;
        if(e.key === 's' && paddle.y < canvas.height - paddle.h) paddle.y += 20;
    };
    
    function gameLoop() {
        update();
        draw();
        loop = requestAnimationFrame(gameLoop);
    }
    
    gameLoop();
}

function generateHex() {
    const color = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
    document.getElementById('hexColor').style.background = color;
    document.getElementById('hexCode').textContent = color;
}

function saveNotes() {
    localStorage.setItem('notes', document.getElementById('notesArea').value);
    alert('Notas guardadas');
}

// MOVIMIENTO 3D ORIGINAL
container.addEventListener("mousemove", (e) => {
    const rect = container.getBoundingClientRect();
    const x = e.clientX - rect.left - rect.width / 2;
    const y = e.clientY - rect.top - rect.height / 2;
    container.style.transform = `perspective(1000px) rotateY(${x * 0.01}deg) rotateX(${-y * 0.01}deg)`;
});

container.addEventListener("mouseleave", () => {
    container.style.transform = "perspective(1000px) rotateY(0deg) rotateX(0deg)";
});
</script>
</body>
</html>
